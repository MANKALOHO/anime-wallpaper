<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二次元壁纸图床 - 简单好用版</title>
    <style>
        /* 简单样式，看着清爽 */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #f5f5f5; font-family:  Arial, sans-serif; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { color: #333; font-size: 24px; margin-bottom: 10px; }
        .header p { color: #666; font-size: 16px; }

        /* 随机换图按钮 */
        .random-btn { text-align: center; margin-bottom: 30px; }
        .random-btn button { 
            background: #0969da; color: white; 
            border: none; padding: 12px 24px; 
            border-radius: 6px; font-size: 16px; 
            cursor: pointer; 
        }
        .random-btn button:hover { background: #0756b3; }

        /* 壁纸预览区 */
        .wallpaper-list { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); 
            gap: 20px; 
            margin-bottom: 40px; 
        }
        .wallpaper-item { 
            background: white; 
            border-radius: 8px; 
            overflow: hidden; 
            box-shadow: 0 2px 4px #ddd; 
        }
        .wallpaper-item img { 
            width: 100%; 
            height: 280px; 
            object-fit: cover; /* 图片不变形 */
        }
        .wallpaper-item p { 
            padding: 10px; 
            font-size: 14px; 
            color: #666; 
            text-align: center; 
        }

        /* 接口说明区 */
        .api-info { 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            box-shadow: 0 2px 4px #ddd; 
        }
        .api-info h2 { 
            color: #333; 
            font-size: 20px; 
            margin-bottom: 15px; 
            border-bottom: 1px solid #eee; 
            padding-bottom: 10px; 
        }
        .api-info .api-item { 
            margin-bottom: 15px; 
            padding-left: 10px; 
            border-left: 3px solid #0969da; 
        }
        .api-info h3 { color: #333; font-size: 16px; margin-bottom: 5px; }
        .api-info p { color: #666; font-size: 14px; }
        .api-info .url { 
            color: #0969da; 
            word-break: break-all; /* 长链接自动换行 */
            margin-top: 5px; 
        }
    </style>
</head>
<body>
    <!-- 头部标题 -->
    <div class="header">
        <h1>二次元壁纸图床</h1>
        <p>点按钮随机换图 | 下面能看所有壁纸 | 有接口能直接用</p>
    </div>

    <!-- 随机换图按钮 -->
    <div class="random-btn">
        <button onclick="getRandomWallpaper()">点击获取随机壁纸</button>
    </div>

    <!-- 壁纸预览列表 -->
    <div class="wallpaper-list" id="wallpaperList">
        <!-- 壁纸会自动加载到这里 -->
        <p style="text-align: center; grid-column: 1/-1;">正在加载壁纸...</p>
    </div>

    <!-- 接口说明（大白话版） -->
    <div class="api-info">
        <h2>接口说明（直接复制就能用）</h2>
        
        <div class="api-item">
            <h3>1. 想要一张随机壁纸（直接出图）</h3>
            <p>用这个链接，打开就直接显示一张随机壁纸，嵌到网页里也能用</p>
            <p class="url">https://api.tengyuesj.cn/anime-wallpaper?type=random</p>
        </div>

        <div class="api-item">
            <h3>2. 想要随机壁纸的信息（带链接、尺寸等）</h3>
            <p>用这个链接，会返回JSON格式的信息，包括壁纸名字、链接、大小</p>
            <p class="url">https://api.tengyuesj.cn/anime-wallpaper?type=random&format=json</p>
        </div>

        <div class="api-item">
            <h3>3. 想要所有壁纸的列表（带全部信息）</h3>
            <p>用这个链接，会返回所有壁纸的信息，方便批量调用</p>
            <p class="url">https://api.tengyuesj.cn/anime-wallpaper?type=list&format=json</p>
        </div>
    </div>

    <script>
        // 页面加载完成后，自动加载所有壁纸
        window.onload = function() {
            loadAllWallpapers();
        }

        // 1. 加载所有壁纸的函数
        function loadAllWallpapers() {
            // 调用GitHub仓库的接口，获取2025文件夹里的所有壁纸
            const repoUrl = 'https://api.github.com/repos/MANKALOHO/anime-wallpaper/contents/2025';
            
            fetch(repoUrl)
                .then(res => res.json())
                .then(files => {
                    // 筛选出图片文件（只留png/jpg/jpeg/webp格式）
                    const imgFiles = files.filter(file => {
                        const ext = file.name.split('.').pop().toLowerCase();
                        return ['png', 'jpg', 'jpeg', 'webp'].includes(ext);
                    });

                    // 清空加载提示，开始渲染壁纸
                    const wallpaperList = document.getElementById('wallpaperList');
                    wallpaperList.innerHTML = '';

                    // 循环把每张壁纸加到页面上
                    imgFiles.forEach(img => {
                        // 生成壁纸的CDN链接（加载更快）
                        const imgCdnUrl = `https://cdn.jsdelivr.net/gh/MANKALOHO/anime-wallpaper@main/${img.path}`;
                        
                        // 创建壁纸卡片
                        const imgItem = document.createElement('div');
                        imgItem.className = 'wallpaper-item';
                        imgItem.innerHTML = `
                            <img src="${imgCdnUrl}" alt="${img.name}">
                            <p>${img.name}</p>
                        `;
                        
                        // 把卡片加到列表里
                        wallpaperList.appendChild(imgItem);
                    });
                })
                .catch(err => {
                    // 加载失败提示
                    document.getElementById('wallpaperList').innerHTML = 
                        '<p style="text-align: center; color: red; grid-column: 1/-1;">壁纸加载失败了，刷新试试~</p>';
                });
        }

        // 2. 获取随机壁纸的函数
        function getRandomWallpaper() {
            // 调用随机壁纸接口，直接跳转显示图片
            window.location.href = 'https://api.tengyuesj.cn/anime-wallpaper?type=random';
        }
    </script>
</body>
</html>
